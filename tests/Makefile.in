#
# builds substation related programs

# Compile c++ source code
.SUFFIXES:.cpp

BASEDIR=../
XREFDIR=${BASEDIR}/xref/
UDATAOBJ=$(BASEDIR)/udataobj/
BINDIR=$(BASEDIR)/bin/
APPDIR=$(BASEDIR)/app/
INCDIR=$(BASEDIR)/include/
LIBDIR=$(BASEDIR)/lib/
LOCALEDIR=${BASEDIR}/locale

CC=@CC@
CCC=@CXX@
CXX=$CCC
RANLIB=@RANLIB@
RM=rm -f
AR=@AR@
MV=@MV@

BITS=@BITS@
OBJECT_MODE=$(BITS)

CXXFLAGS=@CXXFLAGS@
CFLAGS=@CFLAGS@
CPPFLAGS=@CPPFLAGS@
LDFLAGS=@LDFLAGS@
LIBS=@LIBS@

OBJECTS=@OBJECTS@
TARGETS=@TARGETS@

all:${TARGETS}
    
clean: globber

globber:
	${RM} *.o core core.* *.a *.out
	${RM} ${TARGETS}
	$(RM) *unc-backup*~ *unc-backup*~
	$(RM) ULOG*

cxref:
	cxref *.c -xref -index-all -latex209 -O${XREFDIR} -I${INCDIR} -I${INCTUX}

# cpp build rule
.cpp.o:
	$(CCC) $(CXXFLAGS) $(CPPFLAGS) $(CFLAGS) -c $<

.cpp: 
	$(CCC) $(CXXFLAGS) $(CPPFLAGS) $(CFLAGS) $< -o $@ $(LDFLAGS) $(LIBS)
