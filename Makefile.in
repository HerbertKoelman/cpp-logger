# Top makefile to build  @PACKAGE_STRING@
#
# @configure_input@
#

prefix=@prefix@
exec_prefix=@exec_prefix@
INCLUDEDIR=@includedir@/logger
LIBDIR=@libdir@
LOCALEDIR=@localedir@

INSTALL=@INSTALL@ 
RM=@RM@
MKDIR=@MKDIR_P@
PACKAGE=@PACKAGE_NAME@-@PACKAGE_VERSION@-@build_os@.tar.gz
HEADERS=@HEADERS@
DOXYGEN=@DOXYGEN@
CODECHECK=@CODECHECK@

TARGET_LIBS=libcpp-logger.a

all: 
	cd src && $(MAKE)

pkg: 
	$(MKDIR) distrib
	tar cf - `git ls-files`  | gzip -c > distrib/$(PACKAGE)

globber:clean
	-$(RM) -R Makefile autom4te.cache config.log config.status lib distrib doxyfile sonar-project.properties

clean:
	-(cd src && $(MAKE) clean)

codecheck: clean all
		$(CODECHECK)

version:
	autoconf && ( cd src && autoconf )
	-echo "don't forget to run configure."

doxygen:
	${DOXYGEN} doxyfile

install:
	$(MKDIR) $(INCLUDEDIR)
	cd include/logger && $(INSTALL) *.hpp *.h $(INCLUDEDIR)
	cd lib && $(INSTALL) $(TARGET_LIBS) @libdir@

uninstall:
	$(RM) -R  $(INCLUDEDIR)
	cd @libdir@ && $(RM) $(TARGET_LIBS)
